var lemn=function(t){"use strict";const n=11;function i(t,i){const{firstChild:e,lastChild:s}=function(t){return t.nodeType===n?t:{firstChild:t,lastChild:t}}(i);(e.lemnRef=t.i=e.lemnRef||t.i).t=e,(s.lemnEndRef=t.s=s.lemnEndRef||t.s).t=s}function e(t){const n=document.createRange();return n.setStartBefore(t.i.t),n.setEndAfter(t.s.t),n.extractContents(),n}function s(t,n){const s=e(t);i(t,n),s.insertNode(n)}function r({o:{t,u:n}},i){t.removeAttribute(n),Array.isArray(i)?t[n]=i.join(" "):"object"==typeof i?Object.assign(t[n],i):t[n]=i}function o(t){return t.some(Array.isArray)?o([].concat(...t)):t}const h="lemn";function c(t,...n){const i=[t[0],...o(n.map((n,i)=>[n,t[i+1]]))];let e;return Object.defineProperty(i,"content",{get(){if(!e){const t=i.map((t,n)=>"object"==typeof t||"function"==typeof t?`<link class=${h}${n}>`:t).join("")||" ";e=document.createRange().createContextualFragment(t),i.forEach((t,n)=>{if("object"==typeof t||"function"==typeof t){const i=e.querySelector(`.${h}${n}`);i?t.nodeType?s({i:{t:i},s:{t:i}},t.cloneNode(!0)):(t.lemnRef={...t.lemnRef,i:{t:i},s:{t:i}},e.l=[...e.l||[],t]):Array.from(e.querySelectorAll("*")).some(i=>Array.from(i.attributes).some(s=>{if(s.value===`<link class=${h}${n}>`){const n="class"===s.name?"className":s.name;return t.render?(t.lemnRef={o:{t:i,u:n}},e.l=[...e.l||[],t]):r({o:{t:i,u:n}},t),!0}}))}})}return e}}),i}function u(t){return t.nodeType?t:c`${t}`.content}function a(t,n){t&&t.call(n)}function l(t){a(t.willDetach,t)}function m(t){a(t.didAttach,t)}function f(t){if(a(t.willRender,t),t.lemnRef.o)r(t.lemnRef,t.render()||"");else{const n=u(t.render()||" ");n.lemnRef||((t.lemnRef.l||[]).forEach(t=>!(n.l||[]).includes(t)&&l(t)),(n.l||[]).forEach(t=>f(t)),(n.l||[]).forEach(n=>!(t.lemnRef.l||[]).includes(n)&&m(n)),t.lemnRef.l=n.l||[],s(t.lemnRef,n.cloneNode(!0)),n.lemnRef=t.lemnRef)}a(t.didRender,t)}function d(t){return Promise.resolve(t).then(f)}class v{constructor(t,n){this.parent=t,this.m=n,this.data=this.m(this.parent.data,this.data)}unbind(t){0===(this.v=(this.v||[]).filter(n=>n!==t)).length&&this.parent.unbind(this)}bind(t){1===(this.v=[...this.v||[],t]).length&&(this.parent.bind(this),this.data=this.m(this.parent.data,this.data))}push(){this.data!==(this.data=this.m(this.parent.data,this.data))&&((this.v||[]).forEach(t=>t.push()),this.lemnRef&&d(this))}as(t){return new v(this,t)}willDetach(){this.parent.unbind(this)}didAttach(){this.parent.bind(this)}render(){return this.data}}class P extends v{constructor(t={}){super({bind(){},unbind(){},data:t},t=>t)}set(t){this.parent.data=t,this.push()}toJSON(){return this.data}}return t.h=c,t.attach=function(t,n){t.appendChild(u(n)),f(n),m(n)},t.detach=function(t){l(t),e(t.lemnRef)},t.rerender=d,t.Bond=v,t.Model=P,t.Store=class{constructor(t={}){Object.entries(t).forEach(t=>this.set(...t))}model(t){return(this.P=this.P||{})[t]=this.P[t]||new P}get(t){return((this.P=this.P||{})[t]=this.P[t]||new P).data}set(t,n){((this.P=this.P||{})[t]=this.P[t]||new P).set(n)}remove(t){delete this.P[t]}toJSON(){return this.P}},t}({});
//# sourceMappingURL=lemn.min.js.map