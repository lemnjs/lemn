{"version":3,"file":"index.cjs.js","sources":["../src/tag.js","../src/lifecycle.js","../src/bond.js","../src/model.js","../src/store.js","../index.js"],"sourcesContent":["const DOCUMENT_FRAGMENT_NODE = 11;\n\nfunction startEndNodes (replaceWith) {\n  if (replaceWith.nodeType === DOCUMENT_FRAGMENT_NODE) {\n    return replaceWith;\n  }\n  return {firstChild: replaceWith, lastChild: replaceWith};\n}\n\nfunction setRefRange (refRange, replaceWith) {\n  const {firstChild, lastChild} = startEndNodes(replaceWith);\n\n  (firstChild.lemnRef = (refRange.lemnPrivateStart = (firstChild.lemnRef || refRange.lemnPrivateStart))).lemnPrivateDom = firstChild;\n  (lastChild.lemnEndRef = (refRange.lemnPrivateEnd = (lastChild.lemnEndRef || refRange.lemnPrivateEnd))).lemnPrivateDom = lastChild;\n}\n\nfunction removeRef (refRange) {\n  const range = document.createRange();\n  range.setStartBefore(refRange.lemnPrivateStart.lemnPrivateDom);\n  range.setEndAfter(refRange.lemnPrivateEnd.lemnPrivateDom);\n  range.extractContents();\n  return range;\n}\n\nfunction replace (refRange, replaceWith) {\n  const range = removeRef(refRange);\n  setRefRange(refRange, replaceWith);\n  range.insertNode(replaceWith);\n}\n\n/**\n * @private\n * @param {object|function|string|number|boolean} replaceWith\n */\nfunction replaceAttr ({lemnPrivateAttr: {lemnPrivateDom, lemnPrivateName}}, replaceWith) {\n  lemnPrivateDom.removeAttribute(lemnPrivateName);\n  if (Array.isArray(replaceWith)) {\n    lemnPrivateDom[lemnPrivateName] = replaceWith.join(' ');\n  } else if (typeof replaceWith === 'object') {\n    Object.assign(lemnPrivateDom[lemnPrivateName], replaceWith);\n  } else {\n    lemnPrivateDom[lemnPrivateName] = replaceWith;\n  }\n}\n\nfunction flatten (array) {\n  if (array.some(Array.isArray)) {\n    return flatten([].concat(...array));\n  }\n  return array;\n}\n\nconst BIND_PREFIX = 'lemn';\n\n/**\n * A template string tag that turns the strings and input objects into lemnPrivateDom\n * elements.\n *\n * @param {Array.<string>} strings\n * @param {Array} ...exprs\n *\n * @example\n * h`<div></div>`\n *\n * @example\n * h`<div style=\"${{fontSize: '2em'}}\">Big Text</div>`\n *\n * @example\n * h`<div onclick=\"${ev => console.log('clicked!')}\">Click Me</div>`\n *\n * @example\n * h`<div>${{render() {return h`output`;}}}</div>`\n *\n * @example\n * h`<div>${new MyComponent()}</div>`\n */\nfunction h (strings, ..._exprs) {\n  const exprs = [strings[0], ...flatten(_exprs.map((expr, i) => [expr, strings[i + 1]]))];\n\n  const out = exprs.map((expr, i) => (\n    (typeof expr === 'object' || typeof expr === 'function') ?\n      `<link class=${BIND_PREFIX}${i}>` :\n      expr\n  )).join('') || ' ';\n\n  const fragment = document.createRange().createContextualFragment(out);\n\n  exprs.forEach((expr, i) => {\n    if (typeof expr === 'object' || typeof expr === 'function') {\n      const toReplace = fragment.querySelector(`.${BIND_PREFIX}${i}`);\n      if (toReplace) {\n        if (!expr.nodeType) {\n          expr.lemnRef = {...expr.lemnRef, lemnPrivateStart: {lemnPrivateDom: toReplace}, lemnPrivateEnd: {lemnPrivateDom: toReplace}};\n          fragment.lemnPrivateComponents = [...(fragment.lemnPrivateComponents || []), expr];\n        } else {\n          replace({lemnPrivateStart: {lemnPrivateDom: toReplace}, lemnPrivateEnd: {lemnPrivateDom: toReplace}}, expr);\n        }\n      } else {\n        Array.from(fragment.querySelectorAll('*')).some(el => {\n          return Array.from(el.attributes).some(attr => {\n            if (attr.value === `<link class=${BIND_PREFIX}${i}>`) {\n              const attrName = attr.name === 'class' ? 'className' : attr.name;\n              if (expr.render) {\n                expr.lemnRef = {lemnPrivateAttr: {lemnPrivateDom: el, lemnPrivateName: attrName}};\n                fragment.lemnPrivateComponents = [...(fragment.lemnPrivateComponents || []), expr];\n              } else {\n                replaceAttr({lemnPrivateAttr: {lemnPrivateDom: el, lemnPrivateName: attrName}}, expr);\n              }\n              return true;\n            }\n          });\n        });\n      }\n    }\n  });\n\n  return fragment;\n}\n\nexport {\n  setRefRange,\n  removeRef,\n  replace,\n  replaceAttr,\n  flatten,\n  h,\n  BIND_PREFIX,\n};\n","import {removeRef, replace, replaceAttr, h} from './tag';\n\nfunction toFragment (replaceWith) {\n    if (replaceWith.nodeType) {\n        return replaceWith;\n    }\n    return h`${replaceWith}`;\n}\n\nfunction maybeCall (fn, _this) {\n    fn && fn.call(_this);\n}\n\nfunction willDetach (expr) {\n    maybeCall(expr.willDetach, expr);\n}\n\nfunction didAttach (expr) {\n    maybeCall(expr.didAttach, expr);\n}\n\nfunction performRender (expr) {\n    maybeCall(expr.willRender, expr);\n\n    if (expr.lemnRef.lemnPrivateAttr) {\n      replaceAttr(expr.lemnRef, expr.render() || '');\n    } else {\n      const fragment = toFragment(expr.render() || ' ');\n      if (!fragment.lemnRef) {\n        (expr.lemnRef.lemnPrivateComponents || []).forEach(v => !(fragment.lemnPrivateComponents || []).includes(v) && willDetach(v));\n        (fragment.lemnPrivateComponents || []).forEach(component => performRender(component));\n        (fragment.lemnPrivateComponents || []).forEach(v => !(expr.lemnRef.lemnPrivateComponents || []).includes(v) && didAttach(v));\n        expr.lemnRef.lemnPrivateComponents = (fragment.lemnPrivateComponents || []);\n\n        replace(expr.lemnRef, fragment);\n        fragment.lemnRef = expr.lemnRef;\n      }\n    }\n\n    maybeCall(expr.didRender, expr);\n}\n\n/**\n * Queue to call a component's render method later and inject its returned\n * value into the dom.\n *\n * @param {Component} component - rerender this component soon\n */\nfunction rerender (expr) {\n    return Promise.resolve(expr).then(performRender);\n}\n\n/**\n * Attach a component into some root node.\n *\n * @param {HTMLElement} root - html element to attach component under\n * @param {Component} component - component to render\n */\nfunction attach(root, expr) {\n    root.appendChild(h`${expr}`);\n    performRender(expr);\n    didAttach(expr);\n}\n\n/**\n * Detach a component from the dom.\n *\n * @param {Component} component - component to detach from parent dom\n */\nfunction detach(expr) {\n    willDetach(expr);\n    removeRef(expr.lemnRef);\n}\n\nexport {\n    toFragment,\n    maybeCall,\n    performRender,\n    rerender,\n    attach,\n    detach,\n};\n","import {rerender} from './lifecycle';\n\n/**\n * A function bonded a Model or other Bond parent. Changes are pushed from\n * parent to child. Using a Bond in a `h` tagged template string will\n * automatically rerender when its function returns a new value from its parent\n * Model or Bond.\n */\nclass Bond {\n  constructor (parent, fn) {\n    this.parent = parent;\n    this.lemnPrivateFn = fn;\n    this.data = this.lemnPrivateFn(this.parent.data, this.data);\n  }\n\n  unbind (child) {\n    if ((this.lemnPrivateActiveChildren = (this.lemnPrivateActiveChildren || []).filter(c => c !== child)).length === 0) {\n      this.parent.unbind(this);\n    }\n  }\n\n  bind (child) {\n    if ((this.lemnPrivateActiveChildren = [...(this.lemnPrivateActiveChildren || []), child]).length === 1) {\n      this.parent.bind(this);\n      this.data = this.lemnPrivateFn(this.parent.data, this.data);\n    }\n  }\n\n  push () {\n    if (this.data !== (this.data = this.lemnPrivateFn(this.parent.data, this.data))) {\n      (this.lemnPrivateActiveChildren || []).forEach(child => child.push());\n      if (this.lemnRef) {\n        rerender(this);\n      }\n    }\n  }\n\n  as (fn) {\n    return new Bond(this, fn);\n  }\n\n  willDetach () {\n    this.parent.unbind(this);\n  }\n\n  didAttach () {\n    this.parent.bind(this);\n  }\n\n  render () {\n    return this.data;\n  }\n}\n\nexport {\n  Bond,\n};\n","import {Bond} from './bond';\n\n/** A data model that pushes changes to bonded functions. */\nclass Model extends Bond {\n  constructor (data = {}) {\n    super({\n      bind () {},\n      unbind () {},\n      data\n    }, n => n);\n  }\n\n  set (data) {\n    this.parent.data = data;\n    this.push();\n  }\n\n  toJSON () {\n    return this.data;\n  }\n}\n\nexport {\n  Model,\n};\n","import {Model} from './model';\n\n/** A store for multiple Models to utilize them in multiple components. */\nclass Store {\n  constructor (lemnData = {}) {\n    Object.entries(lemnData).forEach(args => this.set(...args));\n  }\n\n  model (id) {\n    return ((this.lemnPrivateData = this.lemnPrivateData || {})[id] = this.lemnPrivateData[id] || new Model());\n  }\n\n  get (id) {\n    return ((this.lemnPrivateData = this.lemnPrivateData || {})[id] = this.lemnPrivateData[id] || new Model()).data;\n  }\n\n  set (id, lemnData) {\n    ((this.lemnPrivateData = this.lemnPrivateData || {})[id] = this.lemnPrivateData[id] || new Model()).set(lemnData);\n  }\n\n  remove (id) {\n    delete this.lemnPrivateData[id];\n  }\n\n  toJSON () {\n    return this.lemnPrivateData;\n  }\n}\n\nexport {\n  Store,\n};\n","export {h} from './src/tag.js';\nexport {attach, detach, rerender} from './src/lifecycle.js';\nexport {Bond} from './src/bond';\nexport {Model} from './src/model';\nexport {Store} from './src/store';\n\n/** Some text. */\n"],"names":[],"mappings":"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"}