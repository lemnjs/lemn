!function([t]){const n={r(){},d(t,n,s){t[n]=s}},s={};t.call(s,null,s,n);for(const t in s)s[t]=s[t]()}([function(t,n,s){"use strict";s.r(n);const i=11;function o(t,n){const{firstChild:s,lastChild:o}=function(t){return t.nodeType===i?t:{firstChild:t,lastChild:t}}(n);(s.lemnRef=t.i=s.lemnRef||t.i).t=s,(o.lemnEndRef=t.s=o.lemnEndRef||t.s).t=o}function e(t){const n=document.createRange();return n.setStartBefore(t.i.t),n.setEndAfter(t.s.t),n.extractContents(),n}function r(t,n){const s=e(t);o(t,n),s.insertNode(n)}function c({h:{t,o:n}},s){t.removeAttribute(n),Array.isArray(s)?t[n]=s.join(" "):"object"==typeof s?Object.assign(t[n],s):t[n]=s}function h(t){return t.some(Array.isArray)?h([].concat(...t)):t}const u="lemn";function l(t,...n){const s=[t[0],...h(n.map((n,s)=>[n,t[s+1]]))],i=s.map((t,n)=>"object"==typeof t||"function"==typeof t?`<link class=${u}${n}>`:t).join("")||" ",o=document.createRange().createContextualFragment(i);return s.forEach((t,n)=>{if("object"==typeof t||"function"==typeof t){const s=o.querySelector(`.${u}${n}`);s?t.nodeType?r({i:{t:s},s:{t:s}},t):(t.lemnRef={...t.lemnRef,i:{t:s},s:{t:s}},o.l=[...o.l||[],t]):Array.from(o.querySelectorAll("*")).some(s=>Array.from(s.attributes).some(i=>{if(i.value===`<link class=${u}${n}>`){const n="class"===i.name?"className":i.name;return t.render?(t.lemnRef={h:{t:s,o:n}},o.l=[...o.l||[],t]):c({h:{t:s,o:n}},t),!0}}))}}),o}function a(t,n){t&&t.call(n)}function d(t){a(t.willDetach,t)}function f(t){a(t.didAttach,t)}function $(t){if(a(t.willRender,t),t.lemnRef.h)c(t.lemnRef,t.render()||"");else{const s=(n=t.render()||" ").nodeType?n:l`${n}`;s.lemnRef||((t.lemnRef.l||[]).forEach(t=>!(s.l||[]).includes(t)&&d(t)),(s.l||[]).forEach(t=>$(t)),(s.l||[]).forEach(n=>!(t.lemnRef.l||[]).includes(n)&&f(n)),t.lemnRef.l=s.l||[],r(t.lemnRef,s),s.lemnRef=t.lemnRef)}var n;a(t.didRender,t)}class p{constructor(t,n){this.parent=t,this.u=n,this.data=this.u(this.parent.data,this.data)}unbind(t){0===(this.m=(this.m||[]).filter(n=>n!==t)).length&&this.parent.unbind(this)}bind(t){1===(this.m=[...this.m||[],t]).length&&(this.parent.bind(this),this.data=this.u(this.parent.data,this.data))}push(){var t;this.data!==(this.data=this.u(this.parent.data,this.data))&&((this.m||[]).forEach(t=>t.push()),this.lemnRef&&(t=this,Promise.resolve(t).then($)))}as(t){return new p(this,t)}willDetach(){this.parent.unbind(this)}didAttach(){this.parent.bind(this)}render(){return this.data}}class y extends p{constructor(t={}){super({bind(){},unbind(){},data:t},t=>t)}set(t){this.parent.data=t,this.push()}toJSON(){return this.data}}function m(t){return t.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;")}class b{constructor(t={}){this.options=t}render(){const{name:t,placeholder:n,model:s}=this.options;return l`<input type="text"
      name="${t}"
      placeholder="${n}"
      value="${s.data}"
      onkeyup="${t=>s.set(t.currentTarget.value)}">`}}!function(t,n){t.appendChild(l`${n}`),$(n),f(n)}(document.querySelector(".root"),new class{constructor(){this.name=new y("")}render(){return l`
      ${new b({placeholder:"world",model:this.name})}
      <div>hello ${this.name.as(t=>t||"world").as(m)}</div>
    `}})}]);
//# sourceMappingURL=helloworld.js.map