{"version":3,"sources":["webpack:///cheap bootstrap","webpack:///../dist/index.min.js","webpack:///./todo.js"],"names":["__webpack_require__","[object Object]","exports","name","getter","factory","call","key","t","i","n","firstChild","e","lastChild","s","nodeType","lemnRef","lemnEndRef","document","createRange","setStartBefore","setEndAfter","extractContents","insertNode","h","o","removeAttribute","Array","isArray","join","Object","assign","r","some","concat","map","c","createContextualFragment","forEach","querySelector","l","from","querySelectorAll","attributes","value","render","a","willDetach","didAttach","u","willRender","includes","didRender","v","this","parent","data","m","filter","length","unbind","bind","push","Promise","resolve","then","P","super","store","entries","set","todos/index","todo_ToDoItem","id","model","as","complete","ev","description","todo_ToDoSet","index","ids","todo_TextInput","options","currentTarget","todo_ToDoForm","nextId","submit","descriptionModel","get","preventDefault","appendChild","f","todosIndex"],"mappings":"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","file":"todo.js","sourcesContent":["const __webpack_require__ = {r () {}, d (exports, name, getter) {exports[name] = getter;}};\nconst exports = {};\nfactory.call(exports, null, exports, __webpack_require__);\nfor (const key in exports) {exports[key] = exports[key]();}\nreturn exports;","const t=11;function i(i,n){const{firstChild:e,lastChild:s}=function(i){return i.nodeType===t?i:{firstChild:i,lastChild:i}}(n);(e.lemnRef=i.i=e.lemnRef||i.i).t=e,(s.lemnEndRef=i.s=s.lemnEndRef||i.s).t=s}function n(t){const i=document.createRange();return i.setStartBefore(t.i.t),i.setEndAfter(t.s.t),i.extractContents(),i}function e(t,e){const s=n(t);i(t,e),s.insertNode(e)}function s({h:{t,o:i}},n){t.removeAttribute(i),Array.isArray(n)?t[i]=n.join(\" \"):\"object\"==typeof n?Object.assign(t[i],n):t[i]=n}function r(t){return t.some(Array.isArray)?r([].concat(...t)):t}const h=\"lemn\";function o(t,...i){const n=[t[0],...r(i.map((i,n)=>[i,t[n+1]]))],o=n.map((t,i)=>\"object\"==typeof t||\"function\"==typeof t?`<link class=${h}${i}>`:t).join(\"\")||\" \",c=document.createRange().createContextualFragment(o);return n.forEach((t,i)=>{if(\"object\"==typeof t||\"function\"==typeof t){const n=c.querySelector(`.${h}${i}`);n?t.nodeType?e({i:{t:n},s:{t:n}},t):(t.lemnRef={...t.lemnRef,i:{t:n},s:{t:n}},c.l=[...c.l||[],t]):Array.from(c.querySelectorAll(\"*\")).some(n=>Array.from(n.attributes).some(e=>{if(e.value===`<link class=${h}${i}>`){const i=\"class\"===e.name?\"className\":e.name;return t.render?(t.lemnRef={h:{t:n,o:i}},c.l=[...c.l||[],t]):s({h:{t:n,o:i}},t),!0}}))}}),c}function c(t,i){t&&t.call(i)}function a(t){c(t.willDetach,t)}function l(t){c(t.didAttach,t)}function u(t){if(c(t.willRender,t),t.lemnRef.h)s(t.lemnRef,t.render()||\"\");else{const n=(i=t.render()||\" \").nodeType?i:o`${i}`;n.lemnRef||((t.lemnRef.l||[]).forEach(t=>!(n.l||[]).includes(t)&&a(t)),(n.l||[]).forEach(t=>u(t)),(n.l||[]).forEach(i=>!(t.lemnRef.l||[]).includes(i)&&l(i)),t.lemnRef.l=n.l||[],e(t.lemnRef,n),n.lemnRef=t.lemnRef)}var i;c(t.didRender,t)}function m(t){return Promise.resolve(t).then(u)}function f(t,i){t.appendChild(o`${i}`),u(i),l(i)}function d(t){a(t),n(t.lemnRef)}class v{constructor(t,i){this.parent=t,this.u=i,this.data=this.u(this.parent.data,this.data)}unbind(t){0===(this.m=(this.m||[]).filter(i=>i!==t)).length&&this.parent.unbind(this)}bind(t){1===(this.m=[...this.m||[],t]).length&&(this.parent.bind(this),this.data=this.u(this.parent.data,this.data))}push(){this.data!==(this.data=this.u(this.parent.data,this.data))&&((this.m||[]).forEach(t=>t.push()),this.lemnRef&&m(this))}as(t){return new v(this,t)}willDetach(){this.parent.unbind(this)}didAttach(){this.parent.bind(this)}render(){return this.data}}class P extends v{constructor(t={}){super({bind(){},unbind(){},data:t},t=>t)}set(t){this.parent.data=t,this.push()}toJSON(){return this.data}}class b{constructor(t={}){Object.entries(t).forEach(t=>this.set(...t))}model(t){return(this.v=this.v||{})[t]=this.v[t]||new P}get(t){return((this.v=this.v||{})[t]=this.v[t]||new P).data}set(t,i){((this.v=this.v||{})[t]=this.v[t]||new P).set(i)}remove(t){delete this.v[t]}toJSON(){return this.v}}export{o as h,f as attach,d as detach,m as rerender,v as Bond,P as Model,b as Store};","import {h, rerender, attach, Model, Store} from '..';\n\nconst store = new Store({\n  'todos/index': [],\n});\n\nclass ToDoItem {\n  constructor (id) {\n    this.id = id;\n    this.model = store.model(id);\n  }\n\n  render () {\n    const {model} = this;\n    return h`<div>\n    <input type=\"checkbox\"\n      checked=\"${model.as(({complete}) => complete)}\"\n      onchange=\"${ev => model.set({...model.data, complete: !model.data.complete})}\">\n      ${model.data.description}\n    </div>`;\n  }\n}\n\nclass ToDoSet {\n  constructor (id) {\n    this.id = id;\n    this.index = store.model(id);\n  }\n\n  render () {\n    return h`${this.index.as(ids => ids.map(id => new ToDoItem(id)))}`;\n  }\n}\n\nclass TextInput {\n  constructor (options = {name: 'name', model: new Model('')}) {\n    this.options = options;\n  }\n\n  render () {\n    const {name, model} = this.options;\n    return h`<input type=\"text\"\n      name=\"${name}\"\n      value=\"${model.as(i => i)}\"\n      onkeyup=\"${ev => model.set(ev.currentTarget.value)}\">`;\n  }\n}\n\nclass ToDoForm {\n  constructor () {\n    this.nextId = 0;\n    this.submit = this.submit.bind(this);\n    this.descriptionModel = new Model('');\n  }\n\n  submit (ev) {\n    const id = this.nextId++;\n\n    store.set(`todos/${id}`, {\n      complete: false,\n      description: this.descriptionModel.data,\n    });\n    this.descriptionModel.set('');\n\n    store.set('todos/index', [\n      ...(store.get('todos/index') || []),\n      `todos/${id}`\n    ]);\n\n    ev.preventDefault();\n    return false;\n  }\n\n  render () {\n    return h`<form onsubmit=\"${this.submit}\">\n      ${new TextInput({name: 'description', model: this.descriptionModel})}\n      <input type=\"button\" value=\"add\" onclick=\"${this.submit}\">\n    </form>`;\n  }\n}\n\nclass App {\n  render () {\n    const todosIndex = store.model('todos/index');\n    const clearComplete = () => todosIndex.set(\n      todosIndex.data.filter(id => !store.get(id).complete)\n    );\n    return h`\n      <input type=\"button\" value=\"clear complete\" onclick=\"${clearComplete}\">\n      ${new ToDoForm()}\n      ${new ToDoSet('todos/index')}\n    `;\n  }\n}\n\nattach(document.querySelector('.root'), new App);\n"],"sourceRoot":""}