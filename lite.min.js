const t=11;function n(n,e){const{firstChild:r,lastChild:i}=function(n){return n.nodeType===t?n:{firstChild:n,lastChild:n}}(e);(r.lemnRef=n.i=r.lemnRef||n.i).t=r,(i.lemnEndRef=n.o=i.lemnEndRef||n.o).t=i}function e(t,e){const r=function(t){const n=document.createRange();return n.setStartBefore(t.i.t),n.setEndAfter(t.o.t),n.extractContents(),n}(t);n(t,e),r.insertNode(e)}function r({m:{t,l:n}},e){t.removeAttribute(n),Array.isArray(e)?t[n]=e.join(" "):"object"==typeof e?Object.assign(t[n],e):t[n]=e}function i(t){return t.some(Array.isArray)?i([].concat(...t)):t}const o="lemn";function a(t,...n){const a=[t[0],...i(n.map((n,e)=>[n,t[e+1]]))],c=a.map((t,n)=>"object"==typeof t||"function"==typeof t?`<link class=${o}${n}>`:t).join("")||" ",m=document.createRange().createContextualFragment(c);return a.forEach((t,n)=>{if("object"==typeof t||"function"==typeof t){const i=m.querySelector(`.${o}${n}`);i?t.nodeType?e({i:{t:i},o:{t:i}},t):(t.lemnRef={...t.lemnRef,i:{t:i},o:{t:i}},m.s=[...m.s||[],t]):Array.from(m.querySelectorAll("*")).some(e=>Array.from(e.attributes).some(i=>{if(i.value===`<link class=${o}${n}>`){const n="class"===i.name?"className":i.name;return t.render?(t.lemnRef={m:{t:e,l:n}},m.s=[...m.s||[],t]):r({m:{t:e,l:n}},t),!0}}))}}),m}function c(t,n){t&&t.call(n)}function m(t){c(t.didAttach,t)}function l(t){if(c(t.willRender,t),t.lemnRef.m)r(t.lemnRef,t.render()||"");else{const r=(n=t.render()||" ").nodeType?n:a`${n}`;r.lemnRef||((t.lemnRef.s||[]).forEach(t=>!(r.s||[]).includes(t)&&function(t){c(t.willDetach,t)}(t)),(r.s||[]).forEach(t=>l(t)),(r.s||[]).forEach(n=>!(t.lemnRef.s||[]).includes(n)&&m(n)),t.lemnRef.s=r.s||[],e(t.lemnRef,r),r.lemnRef=t.lemnRef)}var n;c(t.didRender,t)}function f(t){return Promise.resolve(t).then(l)}function s(t,n){t.appendChild(a`${n}`),l(n),m(n)}export{a as h,s as attach,f as rerender};