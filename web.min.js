var lemn=function(t){"use strict";const i=11;function n(t,n){const{firstChild:e,lastChild:s}=function(t){return t.nodeType===i?t:{firstChild:t,lastChild:t}}(n);(e.lemnRef=t.i=e.lemnRef||t.i).t=e,(s.lemnEndRef=t.s=s.lemnEndRef||t.s).t=s}function e(t){const i=document.createRange();return i.setStartBefore(t.i.t),i.setEndAfter(t.s.t),i.extractContents(),i}function s(t,i){const s=e(t);n(t,i),s.insertNode(i)}function r({o:{t,u:i}},n){t.removeAttribute(i),Array.isArray(n)?t[i]=n.join(" "):"object"==typeof n?Object.assign(t[i],n):t[i]=n}function h(t){return t.some(Array.isArray)?h([].concat(...t)):t}const o="lemn";function c(t,...i){const n=[t[0],...h(i.map((i,n)=>[i,t[n+1]]))],e=n.map((t,i)=>"object"==typeof t||"function"==typeof t?`<link class=${o}${i}>`:t).join("")||" ",c=document.createRange().createContextualFragment(e);return n.forEach((t,i)=>{if("object"==typeof t||"function"==typeof t){const n=c.querySelector(`.${o}${i}`);n?t.nodeType?s({i:{t:n},s:{t:n}},t):(t.lemnRef={...t.lemnRef,i:{t:n},s:{t:n}},c.l=[...c.l||[],t]):Array.from(c.querySelectorAll("*")).some(n=>Array.from(n.attributes).some(e=>{if(e.value===`<link class=${o}${i}>`){const i="class"===e.name?"className":e.name;return t.render?(t.lemnRef={o:{t:n,u:i}},c.l=[...c.l||[],t]):r({o:{t:n,u:i}},t),!0}}))}}),c}function a(t,i){t&&t.call(i)}function u(t){a(t.willDetach,t)}function l(t){a(t.didAttach,t)}function m(t){if(a(t.willRender,t),t.lemnRef.o)r(t.lemnRef,t.render()||"");else{const n=(i=t.render()||" ").nodeType?i:c`${i}`;n.lemnRef||((t.lemnRef.l||[]).forEach(t=>!(n.l||[]).includes(t)&&u(t)),(n.l||[]).forEach(t=>m(t)),(n.l||[]).forEach(i=>!(t.lemnRef.l||[]).includes(i)&&l(i)),t.lemnRef.l=n.l||[],s(t.lemnRef,n),n.lemnRef=t.lemnRef)}var i;a(t.didRender,t)}function f(t){return Promise.resolve(t).then(m)}class v{constructor(t,i){this.parent=t,this.m=i,this.data=this.m(this.parent.data,this.data)}unbind(t){0===(this.v=(this.v||[]).filter(i=>i!==t)).length&&this.parent.unbind(this)}bind(t){1===(this.v=[...this.v||[],t]).length&&(this.parent.bind(this),this.data=this.m(this.parent.data,this.data))}push(){this.data!==(this.data=this.m(this.parent.data,this.data))&&((this.v||[]).forEach(t=>t.push()),this.lemnRef&&f(this))}as(t){return new v(this,t)}willDetach(){this.parent.unbind(this)}didAttach(){this.parent.bind(this)}render(){return this.data}}class d extends v{constructor(t={}){super({bind(){},unbind(){},data:t},t=>t)}set(t){this.parent.data=t,this.push()}toJSON(){return this.data}}return t.h=c,t.attach=function(t,i){t.appendChild(c`${i}`),m(i),l(i)},t.detach=function(t){u(t),e(t.lemnRef)},t.rerender=f,t.Bond=v,t.Model=d,t.Store=class{constructor(t={}){Object.entries(t).forEach(t=>this.set(...t))}model(t){return(this.P=this.P||{})[t]=this.P[t]||new d}get(t){return((this.P=this.P||{})[t]=this.P[t]||new d).data}set(t,i){((this.P=this.P||{})[t]=this.P[t]||new d).set(i)}remove(t){delete this.P[t]}toJSON(){return this.P}},t}({});
//# sourceMappingURL=web.min.js.map